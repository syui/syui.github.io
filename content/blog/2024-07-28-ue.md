+++
date = "2024-07-28"
tags = ["ue","ue5", "vrm"]
title = "アイの新衣装と方向性"
+++

今回は、アイの衣装を作り始めた話をします。

まずアイの衣装のことを少し解説すると、アイは基本的に真っ白で少しボロがある服を着ていて、それが気に入っています。

この衣装を`v1.0`としましょう。

絵を描く時とか衣装はめんどくさいので、そういう利点があります。

<img src="https://card.syui.ai/card/card_13.webp" style="width:300px;margin: 0 auto;display :block;padding:20px 0;">

しかし、この衣装を3Dやゲームにする場合はどうでしょう。例えば、衣装を書くのがめんどくさいというのは、主に繰り返し描くのがつらいわけで、一度作れば使い回せるなら話は変わってきます。

めんどくさいけど、そこまでじゃない...かもしれない。

それにゲームに使われるような衣装を一度作ってみたいと思っていたので、その時に作りました。この衣装を`v2.0`とします。

<img src="https://card.syui.ai/card/card_129.webp" style="width:300px;margin: 0 auto;display :block;padding:20px 0;">

この衣装はvroidで作成し、どのよう作ったかと言うと、vroidが公式で提供してくれている衣装があって、その組み合わせで作りました。もちろん、組み合わせればそれでいいかというと、そんなことはなく、独自に調整して作りました。調整はイラストを描くアプリで絵を描く要領で行います。

どのような衣装を目指したかというと、これは明確に原神のナヒーダの衣装を参考にしました。

正直、衣装といっても私はよくわからない。作ったこともありません。ですから、センスが良いと思った衣装を参考にしました。

しかし、v2.0の衣装はthree-vrmの見栄えで調整していました。

これをunreal engineに持ってきて使っていたわけですが、正直、厳しかった。

vroidで作る衣装というのは基本的に紙なのです。ペラペラの紙をモデルに貼り付ける感じ。厚みも立体感もありません。three-vrmで表示するならいいのですが、ゲームで動かす場合は厳しいと思います。

そこで、新しく衣装を作り直す必要がありました。

現在作っているのはこの衣装でナンバリングでいうと`v3.0`になります。

<img src="https://card.syui.ai/card/card_131.webp" style="width:300px;margin: 0 auto;display :block;padding:20px 0;">

## blenderによる3DモデリングとSK+ABPの組み合わせによる揺れの制御

<video controls style="width:100%;"><source src="/m/post/ue/ue5_2024-07-28_01.mp4"></video>

- 3Dモデリング

![](/m/post/ue/ue5_2024-07-28_02.png)

- SK+ABP

SKを右クリックでanim(blueprint)を作ります。そこで`kawaii physics`を当てます。settingsは`World Damping Location:1.0`, `World Damping Rotation:0.3`, `Limit Angle:20.0`です。後ろに下がると体に入り込んでしまうのを抑えるため20で設定しています。

![](/m/post/ue/ue5_2024-07-28_01.png)

今回はblenderによる3Dモデリングを行いました。vroidの髪の毛でマントを作ってみましたが、調整が難しく、ipadで描ければいいのですがアプリが落ちるので、しかも、macとwinで出力したものは同じではなく、unreal engineの描写に不具合が出る関係で、髪はmacで描いて、衣装はipadでやって、macで出力したものをwinに送って、unreal engineで動きを確認し、おかしければまたvroidで調整するみたいなことをやっていました。これは今も続いていますが、やろうとする人はとても大変な思いをすると思います。今回はblender, vroid, unreal engine, ipad, mac, winを使って作りました。

これをベースに`v3.x`などの改良を重ねていくことになると思います。デザイン的な変更はあるかもしれません。今までのバージョンは主にデザインではなく作り方によって決まっていて、v1は一つの衣装を改造して作ったもので、v2は衣装の組み合わせ、v3はモデリング(厚み)になっています。

## vroidのワンピースはおすすめしない

vroidのワンピースは、上半身、下半身に1mmの隙間ができます。これは正常の姿勢では問題になりませんが、three-vrmで確認してみると浮かび上がる動作で確認できます。

その他にも仕様上の問題ですが、胸の部分の肌マスクを一部消しておかないといけません。

しかし、それをやると、今度はunreal engineで表示する場合の問題が発生します。

つまり、vroidのワンピースは基本的に使うべきではなく、ロングコートを使っていたv2.0のほうが良かったところがあります。

