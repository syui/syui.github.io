+++
date = "2024-05-13"
tags = ["arch"]
title = "archlinuxでnetworkがfreezeする"
slug = "arch"
+++

archlinuxがfreeze(フリーズ)する現象は何度か確認されていて、`macbook air`にインストールしているものにのみ発生します。

以前、高頻度にfreezeを引き起こしていたのはkernel modulesの`rtw88_8821ce`です。`blacklist rtw88_8821ce`することで回避できます。

しかし、これを回避してもたまにfreezeすることがあって、freezeするとethで接続しているネットワーク全体、つまり、ルーターの機能を停止させてしまうというよくわからない現象が発生していました。

この現象は不定期でかつ何らかのアクションがトリガーになっているわけではありません。放置しておくとたまに発生するみたいな感じです。

そして、wifi接続の場合はルーターに影響を及ぼすことはありませんが、eth接続の場合はネットワーク全体が止まりました。そのルーターに接続されている他のパソコンもネットワークが止まります。

これもwifiに関連するドライバが影響を及ぼしていました。そして、wifiデバイスを立ち上げていない場合でも発生します。

wifiを使わない場合は以下のような`broadcom`関連のpakcageを削除しましょう。

```sh
$ pacman -Rs broadcom-wl
```
