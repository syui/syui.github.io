<!DOCTYPE html>
<html>
	<head>
		<title>windows | syui.github.io</title>
		<meta http-equiv="Content-type" content="text/html; charset=utf-8" />
		<meta name="author" content="syui" />
		<meta name="copyright" content="© syui" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<meta name="description" content="syui blog" />
		<meta name="keywords" content="syui, blog" />
		<meta name="twitter:card" content="summary" />
		<meta name="twitter:site" content="@syui__" />
		<meta name="robots" content="all" />
		<meta name="googlebot" content="all" />
		<meta property="og:type" content="blog" />
		<meta property="og:title" content="windows" />
		<meta property="og:locale" content="ja_JP" />
		<meta property="og:description" content="syui blog" />
		<meta property="og:image" content="https://syui.github.io//og.png" />
		<meta property="og:url" content="https://syui.github.io/m/post/windows/" />
		<meta property="og:site_name" content="syui.github.io" />
		<link rel="icon" href="/favicon.ico" />
		<link rel="shortcut icon" href="/favicon.ico">
		<link rel="apple-touch-icon" href="/apple-touch-icon.png" />
		<link rel="stylesheet" href="/css/terminal.css" />
		<link rel="stylesheet" href="/css/style.css" />
		<link rel="stylesheet" href="/css/blog.css" />
		<link rel="stylesheet" href="/css/nav.css" />
		<link rel="stylesheet" href="/css/svg.css" />
		<link rel="stylesheet" href="/bower_components/icomoon/style.css" />
		<link rel="stylesheet" href="/bower_components/font-awesome/css/all.min.css" />
		<script type="application/ld+json">
			{
				"@context": "http://schema.org",
					"@type": "WebSite",
					"name": "syui.github.io",
					"url": "https:\/\/syui.github.io\/"
			}
		</script>

		<link rel="stylesheet" href="https://syui.github.io//bower_components/highlightjs/styles/monokai.css">
		<script src="https://syui.github.io//bower_components/highlightjs/highlight.pack.min.js"></script>
		<script>hljs.initHighlightingOnLoad();</script>
		<script src="https://term.syui.ai/term/pkg/jquery.ajax/jquery.min.js"></script>
	</head>

<nav class="navbar navbar-expand-lg navbar-light bg-light">
	<div class="collapse navbar-collapse" id="navbarNavAltMarkup">
		<div class="navbar-nav">
			<span class="navbar-title-text"><a href="/"><span class="icon-syui"></span></a></span>
			<div class="navbar-nav-left">
				<a class="navbar-brand" href="/blog">ブログ</a>
				<a class="navbar-brand" href="/m">タグ</a>
				<a class="navbar-brand" href="/icon">アイコン</a>
				<a class="navbar-brand" href="/syui">プロフィール</a>
			</div>
		</div>
		<div class="navbar-nav-right">
		<a href="/blog/index.xml"><i class="fas fa-rss"></i></a>
		</div>
</nav>




<body>
	<div class="containerx">
		<header id="header">
			
			<div class="logo">
				<a href="/blog"><svg width="77pt" height="77pt" viewBox="0 0 512 512" class="likeButton" >
  <circle class="explosion" r="150" cx="250" cy="250"></circle>
  <g class="particleLayer">
    <circle fill="#ef454aba" cx="130" cy="126.5" r="12.5"/>
    <circle fill="#ef454acc" cx="411" cy="313.5" r="12.5"/>
    <circle fill="#ef454aba" cx="279" cy="86.5" r="12.5"/>
    <circle fill="#ef454aba" cx="155" cy="390.5" r="12.5"/>
    <circle fill="#ef454aba" cx="89" cy="292.5" r="10.5"/>
    <circle fill="#ef454aba" cx="414" cy="282.5" r="10.5"/>
    <circle fill="#ef454a91" cx="115" cy="149.5" r="10.5"/>
    <circle fill="#ef454aba" cx="250" cy="80.5" r="10.5"/>
    <circle fill="#ef454aba" cx="78" cy="261.5" r="10.5"/>
    <circle fill="#ef454a91" cx="182" cy="402.5" r="10.5"/>
    <circle fill="#ef454aba" cx="401.5" cy="166" r="13"/>
    <circle fill="#ef454aba" cx="379" cy="141.5" r="10.5"/>
    <circle fill="#ef454a91" cx="327" cy="397.5" r="10.5"/>
    <circle fill="#ef454aba" cx="296" cy="392.5" r="10.5"/>
  </g>
<g transform="translate(0,512) scale(0.1,-0.1)" fill="#000000" class="icon_syui">

<path class="syui" d="M3660 4460 c-11 -11 -33 -47 -48 -80 l-29 -60 -12 38 c-27 88 -58 92 -98 11 -35 -70 -73 -159 -73 -169 0 -6 -5 -10 -10 -10 -6 0 -15 -10 -21 -22 -33 -73 -52 -92 -47 -48 2 26 -1 35 -14 38 -16 3 -168 -121 -168 -138 0 -5 -13 -16 -28 -24 -24 -13 -35 -12 -87 0 -221 55 -231 56 -480 56 -219 1 -247 -1 -320 -22 -44 -12 -96 -26 -115 -30 -57 -13 -122 -39 -200 -82 -8 -4 -31 -14 -50 -23 -41 -17 -34 -13 -146 -90 -87 -59 -292 -252 -351 -330 -63 -83 -143 -209 -143 -225 0 -10 -7 -23 -15 -30 -8 -7 -15 -17 -15 -22 0 -5 -13 -37 -28 -71 -16 -34 -36 -93 -45 -132 -9 -38 -24 -104 -34 -145 -13 -60 -17 -121 -17 -300 1 -224 1 -225 36 -365 24 -94 53 -175 87 -247 28 -58 51 -108 51 -112 0 -3 13 -24 28 -48 42 -63 46 -79 22 -85 -11 -3 -20 -9 -20 -14 0 -5 -4 -9 -10 -9 -5 0 -22 -11 -37 -25 -16 -13 -75 -59 -133 -100 -58 -42 -113 -82 -123 -90 -9 -8 -22 -15 -27 -15 -6 0 -10 -6 -10 -13 0 -8 -11 -20 -25 -27 -34 -18 -34 -54 0 -48 14 3 25 2 25 -1 0 -3 -43 -31 -95 -61 -52 -30 -95 -58 -95 -62 0 -5 -5 -8 -11 -8 -19 0 -84 -33 -92 -47 -4 -7 -15 -13 -22 -13 -14 0 -17 -4 -19 -32 -1 -8 15 -15 37 -18 l38 -5 -47 -48 c-56 -59 -54 -81 9 -75 30 3 45 0 54 -11 9 -13 16 -14 43 -4 29 11 30 10 18 -5 -7 -9 -19 -23 -25 -30 -7 -7 -13 -20 -13 -29 0 -12 8 -14 38 -9 20 4 57 8 82 9 25 2 54 8 66 15 18 10 23 8 32 -13 17 -38 86 -35 152 6 27 17 50 34 50 38 0 16 62 30 85 19 33 -15 72 -2 89 30 8 15 31 43 51 62 35 34 38 35 118 35 77 0 85 2 126 33 24 17 52 32 61 32 9 0 42 18 73 40 30 22 61 40 69 40 21 0 88 -26 100 -38 7 -7 17 -12 24 -12 7 0 35 -11 62 -25 66 -33 263 -84 387 -101 189 -25 372 -12 574 41 106 27 130 37 261 97 41 20 80 37 85 39 6 2 51 31 100 64 166 111 405 372 489 534 10 20 22 43 27 51 5 8 12 22 15 30 3 8 17 40 31 70 54 115 95 313 108 520 13 200 -43 480 -134 672 -28 58 -51 108 -51 112 0 3 -13 24 -29 48 -15 24 -34 60 -40 80 -19 57 3 142 50 193 10 11 22 49 28 85 6 36 16 67 21 68 18 6 31 53 25 83 -4 18 -17 33 -36 41 -16 7 -29 15 -29 18 1 10 38 50 47 50 5 0 20 11 33 25 18 19 22 31 17 61 -3 20 -14 45 -23 55 -16 18 -16 20 6 44 15 16 21 32 18 49 -3 15 1 34 8 43 32 43 7 73 -46 55 l-30 -11 0 85 c0 74 -2 84 -18 84 -21 0 -53 -33 -103 -104 l-34 -48 -5 74 c-7 102 -35 133 -80 88z m-870 -740 c36 -7 75 -14 88 -16 21 -4 23 -9 16 -37 -3 -18 -14 -43 -24 -57 -10 -14 -20 -35 -24 -46 -4 -12 -16 -32 -27 -45 -12 -13 -37 -49 -56 -79 -20 -30 -52 -73 -72 -96 -53 -60 -114 -133 -156 -189 -21 -27 -44 -54 -52 -58 -7 -4 -13 -14 -13 -22 0 -7 -18 -33 -40 -57 -22 -23 -40 -46 -40 -50 0 -5 -19 -21 -42 -38 -47 -35 -85 -38 -188 -15 -115 25 -173 20 -264 -23 -45 -22 -106 -46 -136 -56 -48 -15 -77 -25 -140 -50 -70 -28 -100 -77 -51 -84 14 -2 34 -10 45 -17 12 -7 53 -16 91 -20 90 -9 131 -22 178 -57 20 -16 52 -35 70 -43 18 -7 40 -22 49 -32 16 -18 15 -22 -24 -88 -23 -39 -47 -74 -53 -80 -7 -5 -23 -26 -36 -45 -26 -39 -92 -113 -207 -232 -4 -4 -37 -36 -73 -71 l-66 -64 -20 41 c-58 119 -105 240 -115 301 -40 244 -35 409 20 595 8 30 21 66 28 80 7 14 24 54 38 89 15 35 35 75 46 89 11 13 20 31 20 38 0 8 3 14 8 14 4 0 16 16 27 36 24 45 221 245 278 281 23 15 44 30 47 33 20 20 138 78 250 123 61 24 167 50 250 61 60 7 302 -1 370 -14z m837 -661 c52 -101 102 -279 106 -379 2 -42 0 -45 -28 -51 -16 -4 -101 -7 -187 -8 -166 -1 -229 10 -271 49 -19 19 -19 19 14 49 22 21 44 31 65 31 41 0 84 34 84 66 0 30 12 55 56 112 19 25 37 65 44 95 11 51 53 111 74 104 6 -2 25 -32 43 -68z m-662 -810 c17 -10 40 -24 53 -30 12 -7 22 -16 22 -20 0 -4 17 -13 38 -19 20 -7 44 -18 52 -24 8 -7 33 -21 55 -31 22 -11 42 -23 45 -26 11 -14 109 -49 164 -58 62 -11 101 -7 126 14 15 14 38 18 78 16 39 -2 26 -41 -49 -146 -78 -109 -85 -118 -186 -219 -61 -61 -239 -189 -281 -203 -17 -5 -73 -29 -104 -44 -187 -92 -605 -103 -791 -21 -42 19 -47 24 -37 41 5 11 28 32 51 48 22 15 51 38 64 51 13 12 28 22 33 22 17 0 242 233 242 250 0 6 5 10 10 10 6 0 10 6 10 14 0 25 50 55 100 62 59 8 56 6 115 83 50 66 74 117 75 162 0 14 7 40 16 57 18 38 52 41 99 11z"/>
</g>

</svg>
</a>
			</div>
			
		</header>

<article>
	<div class="content">
		<div class="post-time-date">update : 2022-10-30</div>
		<div class="post-time-date">2021-09-23 / <a href="https://bsky.syui.ai">@syui</a>

		
		
		<p><i class="fa-regular fa-folder"></i> 
		<a href="https://syui.github.io/tags/windows/">windows</a>
		
		
		
		
		
		
		
		
		
		, <a href="https://syui.github.io/tags/m/">m</a>
		
		
		
		
		
		
		
		/ <i class="fa-sharp fa-solid fa-folder"></i> <a href="/m/post/windows">windows</a></p>
		
		</div>

		<h2>windows</h2>

		<p>windowsの使い方をまとめます。windows11を使用しています。</p>
<table>
  <thead>
      <tr>
          <th>title</th>
          <th>body</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>cpu</td>
          <td>AMD Ryzen 7 5700X</td>
      </tr>
      <tr>
          <td>memory</td>
          <td>32GB / DDR4-3200 DIMM (PC4-25600)</td>
      </tr>
      <tr>
          <td>gpu</td>
          <td>GeForce RTX 4060Ti 8GB</td>
      </tr>
      <tr>
          <td>storage</td>
          <td>1TB M.2 NVMe SSD</td>
      </tr>
      <tr>
          <td>inc</td>
          <td>© INVERSENET</td>
      </tr>
  </tbody>
</table>
<h2 id="gpu">gpu</h2>
<p>基本的にgpuのhdmi端子からdispalyに接続します。</p>
<p>nvidiaの<a href="https://www.nvidia.com/download">driver</a>は常にupdateしてください。</p>
<p>download : <a href="https://www.nvidia.com/download/driverResults.aspx/216928/">driver</a>, <a href="https://developer.nvidia.com/cuda-toolkit-archive">cuda v12.1</a>, <a href="https://developer.nvidia.com/rdp/cudnn-archive">cudnn</a></p>
<p>現在、<a href="https://pytorch.org/get-started/previous-versions/">pytorch</a>は<code>cuda v12.1</code>に対応しています。</p>
<h2 id="default-setting">default setting</h2>
<p>基本的には<code>pwsh</code>を使用します。これからはmcpからAIで操作してもらってもよいでしょう。</p>
<h3 id="search-barbing-disable">search-bar(bing disable)</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#75715e"># 「Explorer」キーの存在確認 &amp; 作成</span>
</span></span><span style="display:flex;"><span>New-Item -Path <span style="color:#e6db74">&#34;HKCU:\Software\Policies\Microsoft\Windows\Explorer&#34;</span> -Force | Out-Null
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># DisableSearchBoxSuggestions を 1 に設定（Bing無効化）</span>
</span></span><span style="display:flex;"><span>New-ItemProperty -Path <span style="color:#e6db74">&#34;HKCU:\Software\Policies\Microsoft\Windows\Explorer&#34;</span> <span style="color:#e6db74">`</span>
</span></span><span style="display:flex;"><span>  -Name <span style="color:#e6db74">&#34;DisableSearchBoxSuggestions&#34;</span> -PropertyType DWord -Value <span style="color:#ae81ff">1</span> -Force
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Explorer.exe を再起動</span>
</span></span><span style="display:flex;"><span>Stop-Process -Name explorer -Force
</span></span><span style="display:flex;"><span>Start-Process explorer
</span></span></code></pre></div><h2 id="local-account">local account</h2>
<p>windowsをinstallする際に、microsoft accountを要求されます。これを回避するには、インターネット接続を停止、つまり、回線を引っこ抜いてから初期設定を行う必要があります。</p>
<h2 id="winget">winget</h2>
<p><code>choco</code>, <code>scoop</code>などがありますが、現在はwingetが使いやすくなっています。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#75715e"># https://github.com/microsoft/winget-pkgs</span>
</span></span><span style="display:flex;"><span>$ winget install git.git
</span></span><span style="display:flex;"><span>&lt;Publisher&gt;.&lt;PackageName&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ winget show --id<span style="color:#f92672">=</span>9NT1R1C2HH7J --source<span style="color:#f92672">=</span>msstore
</span></span><span style="display:flex;"><span>公開元: OpenAI
</span></span><span style="display:flex;"><span>発行元 URL: https://help.openai.com
</span></span></code></pre></div><table>
  <thead>
      <tr>
          <th>title</th>
          <th>command(id)</th>
          <th>url</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>terminal</td>
          <td>microsoft.windowsterminal.preview</td>
          <td><a href="https://github.com/microsoft/terminal">https://github.com/microsoft/terminal</a></td>
      </tr>
      <tr>
          <td>pwsh</td>
          <td>microsoft.powershell.preview</td>
          <td><a href="https://github.com/powershell/powershell">https://github.com/powershell/powershell</a></td>
      </tr>
      <tr>
          <td>aishell</td>
          <td>microsoft.aishell</td>
          <td><a href="https://github.com/powershell/aishell/">https://github.com/powershell/aishell/</a></td>
      </tr>
      <tr>
          <td>openssh</td>
          <td>microsoft.openssh.preview</td>
          <td><a href="https://github.com/powershell/win32-openssh">https://github.com/powershell/win32-openssh</a></td>
      </tr>
      <tr>
          <td>wsl</td>
          <td>microsoft.wsl</td>
          <td><a href="https://github.com/microsoft/wsl">https://github.com/microsoft/wsl</a></td>
      </tr>
      <tr>
          <td>vscode</td>
          <td>microsoft.visualstudiocode</td>
          <td><a href="https://github.com/microsoft/vscode">https://github.com/microsoft/vscode</a></td>
      </tr>
      <tr>
          <td>vim</td>
          <td>vim.vim</td>
          <td><a href="https://github.com/vim/vim-win32-installer">https://github.com/vim/vim-win32-installer</a></td>
      </tr>
      <tr>
          <td>git</td>
          <td>git.git</td>
          <td><a href="https://github.com/git/git">https://github.com/git/git</a></td>
      </tr>
      <tr>
          <td>node</td>
          <td>openjs.nodejs</td>
          <td><a href="https://github.com/nodejs/node">https://github.com/nodejs/node</a></td>
      </tr>
      <tr>
          <td>nvm</td>
          <td>coreybutler.nvmforwindows</td>
          <td><a href="https://github.com/nvm-sh/nvm">https://github.com/nvm-sh/nvm</a></td>
      </tr>
      <tr>
          <td>python</td>
          <td>python.python.3.12</td>
          <td><a href="https://github.com/python">https://github.com/python</a></td>
      </tr>
      <tr>
          <td>conda</td>
          <td>anaconda.miniconda3</td>
          <td><a href="https://github.com/anaconda">https://github.com/anaconda</a></td>
      </tr>
  </tbody>
</table>
<table>
  <thead>
      <tr>
          <th>title</th>
          <th>command(id)</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>cuda</td>
          <td>nvidia.cuda</td>
      </tr>
      <tr>
          <td>epicgameslauncher</td>
          <td>epicgames.epicgameslauncher</td>
      </tr>
      <tr>
          <td>blender</td>
          <td>blenderfoundation.blender</td>
      </tr>
      <tr>
          <td>discord</td>
          <td>discord.discord</td>
      </tr>
      <tr>
          <td>unity</td>
          <td>unity.unity</td>
      </tr>
      <tr>
          <td>unity hub</td>
          <td>unity.unityhub</td>
      </tr>
      <tr>
          <td>godot</td>
          <td>godot.godot</td>
      </tr>
      <tr>
          <td>obs</td>
          <td>obsproject.obsstudio</td>
      </tr>
      <tr>
          <td>ollama</td>
          <td>ollama.ollama</td>
      </tr>
      <tr>
          <td>chatgpt</td>
          <td>&ndash;id=9NT1R1C2HH7J &ndash;source=msstore</td>
      </tr>
  </tbody>
</table>
<h3 id="default-shell">default shell</h3>
<p>wingetでpwshをinstall, upgradeしてopensshのdefault-shellにする手順です。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>$ ssh windows
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ winget -v
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 7.2.6</span>
</span></span><span style="display:flex;"><span>$ winget upgrade microsoft.powershell
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 7.3.0</span>
</span></span><span style="display:flex;"><span>$ winget install microsoft.powershell.preview
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ pwsh-preview
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># winのpathは面倒なので適当に補完。下記でも行けると思いますが、念の為tabで変換するといいかも</span>
</span></span><span style="display:flex;"><span>$ vim c:/programdata/ssh/sshd_config
</span></span><span style="display:flex;"><span>PasswordAuthentication no
</span></span><span style="display:flex;"><span>ForceCommand pwsh-preview
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># default-shellにする手順(forcecommandより早くなるけど注意が必要)</span>
</span></span><span style="display:flex;"><span>$ get-command pwsh-preview
</span></span><span style="display:flex;"><span>$ New-ItemProperty -Path <span style="color:#e6db74">&#34;HKLM:\SOFTWARE\OpenSSH&#34;</span> -Name DefaultShell -Value <span style="color:#e6db74">&#34;C:\Program Files\PowerShell\7-preview\preview\pwsh-preview.cmd&#34;</span> -PropertyType String -Force
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ net stop sshd
</span></span><span style="display:flex;"><span>$ net start sshd
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ exit
</span></span><span style="display:flex;"><span>$ ssh windows
</span></span><span style="display:flex;"><span>powershell 7.3.0-preview
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ winget upgrade --all
</span></span></code></pre></div><h2 id="openssh">openssh</h2>
<p><a href="https://github.com/PowerShell/Win32-OpenSSH">https://github.com/PowerShell/Win32-OpenSSH</a></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>$ winget install microsoft.openssh.beta
</span></span></code></pre></div><p><code>sshd_config</code>は<code>c:/programdata/ssh/sshd_config</code>にあります。public-key方式でアクセスするには、最後の方の行に<code>authorized_keys</code>のpathが記載されており、そこにpublickeyを記述します。ここでは、<code>c:/programdata/ssh/administrators_authorized_keys</code>になります。なお、<code>ssh-copy-id</code>コマンドは機能しません。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>$ ls c:/programdata/ssh/
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>Match Group administrators
</span></span><span style="display:flex;"><span>       AuthorizedKeysFile __PROGRAMDATA__/ssh/administrators_authorized_keys
</span></span></code></pre></div><p>ADD userの場合、publickey認証が通らないことがあるようです。このようにして<code>c:/users/$user/.ssh/authorized_keys</code>に置いてみましょう。pathに<code>authorizedKeyPath</code>:<code>c:/users/$user/.ssh/authorized_keys</code>を追加します。</p>
<blockquote>
<p>c:/programdata/ssh/sshd_config</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>PasswordAuthentication no
</span></span><span style="display:flex;"><span>PermitEmptyPasswords yes
</span></span><span style="display:flex;"><span>AuthorizedKeysFile      .ssh/authorized_keys
</span></span><span style="display:flex;"><span><span style="color:#75715e">#Match Group administrators</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#       AuthorizedKeysFile __PROGRAMDATA__/ssh/administrators_authorized_keys</span>
</span></span></code></pre></div><p>shellをpwshに変更するには、以下のコマンドを実行します。</p>
<p><a href="https://docs.microsoft.com/ja-jp/windows-server/administration/openssh/openssh_server_configuration">https://docs.microsoft.com/ja-jp/windows-server/administration/openssh/openssh_server_configuration</a></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>$ New-ItemProperty -Path <span style="color:#e6db74">&#34;HKLM:\SOFTWARE\OpenSSH&#34;</span> -Name DefaultShell -Value <span style="color:#e6db74">&#34;C:\Program Files\PowerShell\7\pwsh.exe&#34;</span> -PropertyType String -Force
</span></span></code></pre></div><p>default-shellを変更した場合の注意ですが、更新した際に以下のerrが出るようになる場合があります。default-shellのpathが違うとpassword/publickey認証のどちらも通りません。</p>
<blockquote>
<p>Permission denied (publickey,keyboard-interactive).</p>
</blockquote>
<p>scpで<code>Connection closed</code>が出る場合、pathが通っていない可能性があります。</p>
<p><code>sshd_config</code>でfstp-serverのpathを記述するか、openssh(dir)のpathを追加しましょう。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>$ get-command fstp
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ Set-Item Env:Path <span style="color:#e6db74">&#34;c:C:\Program Files\OpenSSH;</span>$ENV<span style="color:#e6db74">:Path&#34;</span>
</span></span></code></pre></div><h2 id="auto-login">auto-login</h2>
<p>起動時のパスワードを省略する設定です。</p>
<p>通常は<code>netplwiz</code>を起動して、パスワード入力が必要のチェックを外します。</p>
<p>仮に<code>ユーザーがこのコンピューターを使うには、ユーザー名とパスワードの入力が必要</code>のチェックボックスが表示されない場合、レジストリの値が<code>2</code>になっているので変更する必要があります。</p>
<p><code>regedit</code>を開き、<code>HKEY_LOCAL_MACHINE &gt; SOFTWARE &gt; Microsoft &gt;Windows NT &gt; CurrentVersion &gt; PasswordLess &gt; Device</code>を<code>0</code>にします。</p>
<p><a href="https://docs.microsoft.com/ja-jp/troubleshoot/windows-server/user-profiles-and-logon/turn-on-automatic-logon">https://docs.microsoft.com/ja-jp/troubleshoot/windows-server/user-profiles-and-logon/turn-on-automatic-logon</a></p>
<h3 id="sysinternals">sysinternals</h3>
<p><a href="https://learn.microsoft.com/ja-jp/sysinternals/downloads/">https://learn.microsoft.com/ja-jp/sysinternals/downloads/</a></p>
<h3 id="synthv">synthv</h3>
<p><code>suno</code>に移行しました。</p>
<p>作曲アプリです。</p>
<p><a href="https://dreamtonics.com/synthesizerv">https://dreamtonics.com/synthesizerv</a></p>
<h2 id="stable-diffution">stable-diffution</h2>
<p><code>comfyui</code>に移行しました。</p>
<p>AIによるイラスト生成です。</p>
<p>model-fileをdownloadします。今回は<code>stable-diffusion-v1-4</code>を使用します。novelaiのmodelがすごいらしい。他のmodelも<code>model.ckpt</code>に置き換えると動きます。</p>
<p><a href="https://huggingface.co/">huggingface.co</a></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>$ git clone https://huggingface.co/CompVis/stable-diffusion-v-1-4-original
</span></span><span style="display:flex;"><span>$ mv stable-diffusion-v-1-4-original stable-diffusion/models/ldm/stable-diffusion-v1
</span></span><span style="display:flex;"><span>$ mv sd-v1-4.ckpt model.ckpt 
</span></span></code></pre></div><p>次に<code>anaconda</code>でstable-diffusionのpython環境を構築します。<a href="https://developer.nvidia.com/cuda-toolkit-archive">cuda</a>をinstallしておいてください。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#75715e"># 現在、scoop:extrasからanaconda3がなくなっています</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># scoop bucket add extras</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># scoop install anaconda3 </span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ scoop install python rust
</span></span><span style="display:flex;"><span>$ python -V
</span></span><span style="display:flex;"><span>$ pip -V
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ pip install --pre torch torchvision torchaudio --index-url https://download.pytorch.org/whl/nightly/cu121
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ conda init powershell
</span></span><span style="display:flex;"><span>$ git clone https://github.com/basujindal/stable-diffusion
</span></span><span style="display:flex;"><span>$ mkdir -p ~/stable-diffusion/models/ldm/stable-diffusion-v1
</span></span><span style="display:flex;"><span>$ mv sd-v1-4.ckpt ~/stable-diffusion/models/ldm/stable-diffusion-v1/model.ckpt
</span></span><span style="display:flex;"><span>$ cd stable-diffusion
</span></span><span style="display:flex;"><span>$ conda env create -f environment.yaml
</span></span><span style="display:flex;"><span>$ conda activate ldm
</span></span><span style="display:flex;"><span><span style="color:#75715e"># pytorchはcuda:12.1に対応しています</span>
</span></span><span style="display:flex;"><span>$ conda install pytorch torchvision torchaudio -c pytorch -c conda-forge
</span></span><span style="display:flex;"><span>$ conda install jupyter pandas matplotlib -c conda-forge
</span></span><span style="display:flex;"><span>$ pip install diffusers transformers scipy ftfy
</span></span><span style="display:flex;"><span>$ pip install 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ python -m pip install pytorch-lightning
</span></span><span style="display:flex;"><span>$ pip install einops
</span></span></code></pre></div><p>次回からは<code>$ conda activate ldm</code>で使います。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>$ conda activate ldm
</span></span><span style="display:flex;"><span>$ cd ~/stable-diffusion
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># query(txt)から生成</span>
</span></span><span style="display:flex;"><span>$ python optimizedSD/optimized_txt2img.py --prompt <span style="color:#e6db74">&#34;japanese anime of a beaultiful girl, fantasy costume, fantasy background, be autiful composition, cinematic lighting, pixiv, light novel, digital painting, extremely, detailed, sharp focus, ray tracing, 8k, cinematic postprocessing&#34;</span> --H <span style="color:#ae81ff">512</span> --W <span style="color:#ae81ff">512</span> --seed <span style="color:#ae81ff">27</span> --n_iter <span style="color:#ae81ff">2</span> --n_samples <span style="color:#ae81ff">10</span> --ddim_steps <span style="color:#ae81ff">50</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># imgから生成</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># convert -resize 700x510 o.png input.png</span>
</span></span><span style="display:flex;"><span>$ python optimizedSD/optimized_img2img.py --prompt <span style="color:#e6db74">&#34;japanese anime of a beaultiful girl, pixiv, light novel, digital painting, 8k&#34;</span> --init-img C:<span style="color:#ae81ff">\U</span>sers<span style="color:#ae81ff">\s</span>yui<span style="color:#ae81ff">\i</span>nput.png --strength 0.2 --n_iter <span style="color:#ae81ff">2</span> --n_samples <span style="color:#ae81ff">2</span> --H <span style="color:#ae81ff">300</span> --W <span style="color:#ae81ff">230</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># web-uiからパラメータを調整</span>
</span></span><span style="display:flex;"><span>$ python optimizedSD/inpaint_gradio.py --init-img C:<span style="color:#ae81ff">\U</span>sers<span style="color:#ae81ff">\s</span>yui<span style="color:#ae81ff">\i</span>nput.png
</span></span><span style="display:flex;"><span><span style="color:#75715e"># open localhost:7860</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ ls outputs/*
</span></span></code></pre></div><p>追記 : update</p>
<p><a href="https://github.com/CompVis/stable-diffusion/blob/main/scripts/txt2img.py">txt2img.py</a></p>
<ol>
<li>
<p><a href="https://developer.nvidia.com/cuda-toolkit-archive">cuda</a>を12.3から12.1にdowngradeします。</p>
</li>
<li>
<p><a href="https://pytorch.org/get-started/locally/">pytorch</a>は<code>stable</code>ではなく<code>nightly</code>であるpre-versionを使わないとインストールできません。</p>
</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#75715e"># pytorch:nightly, cuda:12.1</span>
</span></span><span style="display:flex;"><span>$ pip install --pre torch torchvision torchaudio --index-url https://download.pytorch.org/whl/nightly/cu121
</span></span></code></pre></div><p>scoopの<code>anaconda3</code>がなくなっていたので手動でインストールしました。具体的には<code>miniconda</code>を適当にインストールして<code>~/miniconda3/condabin</code>にpathを通します。私はpwshを使うので、以下のコマンドで自動設定します。これをやらないと<code>activate</code>を使えません。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>$ conda init powershell
</span></span></code></pre></div><h3 id="diffusers">diffusers</h3>
<p><code>.ckpt</code>ではなく<code>.safetensors</code>を使用します。</p>
<ul>
<li>v2.1 : <a href="https://huggingface.co/stabilityai/stable-diffusion-2-1">https://huggingface.co/stabilityai/stable-diffusion-2-1</a></li>
<li>github : <a href="https://github.com/Stability-AI/stablediffusion">https://github.com/Stability-AI/stablediffusion</a></li>
<li>model : <a href="https://civitai.com/">civitai</a></li>
<li>prompt : <a href="https://majinai.art/">majinai</a></li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>$ conda diactive
</span></span><span style="display:flex;"><span>---
</span></span><span style="display:flex;"><span>$ conda activate ldm
</span></span><span style="display:flex;"><span>$ pip install diffusers
</span></span><span style="display:flex;"><span>$ pip install git+https://github.com/huggingface/transformers$ 
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py:safe.py" data-lang="py:safe.py"><span style="display:flex;"><span><span style="color:#75715e"># https://huggingface.co/docs/diffusers/api/pipelines/stable_diffusion/text2img</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> diffusers <span style="color:#f92672">import</span> StableDiffusionPipeline
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> torch
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> sys
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>pipe <span style="color:#f92672">=</span> StableDiffusionPipeline<span style="color:#f92672">.</span>from_single_file(<span style="color:#e6db74">&#34;model.safetensors&#34;</span>, torch_dtype<span style="color:#f92672">=</span>torch<span style="color:#f92672">.</span>float16)<span style="color:#f92672">.</span>to(<span style="color:#e6db74">&#34;cuda&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Potential NSFW content was detected in one or more images. A black image will be returned instead. Try again with a different prompt and/or seed.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#pipe.safety_checker = None</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#pipe.requires_safety_checker = False</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># nsfw_content_detected</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>n <span style="color:#f92672">=</span> len(sys<span style="color:#f92672">.</span>argv)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> n <span style="color:#f92672">==</span> <span style="color:#ae81ff">2</span>:
</span></span><span style="display:flex;"><span>    prompt <span style="color:#f92672">=</span> sys<span style="color:#f92672">.</span>argv[<span style="color:#ae81ff">1</span>]
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>    prompt <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;masterpiece, best quality, 1girl, solo, flower, long hair, outdoors, letterboxed, school uniform, day, sky, looking up, short sleeves, parted lips, shirt, cloud, black hair, sunlight, white shirt, serafuku, upper body, from side, pink flower, blurry, brown hair, blue sky, depth of field&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>print(prompt)
</span></span><span style="display:flex;"><span>image <span style="color:#f92672">=</span> pipe(prompt<span style="color:#f92672">=</span>prompt, height<span style="color:#f92672">=</span><span style="color:#ae81ff">512</span>, width<span style="color:#f92672">=</span><span style="color:#ae81ff">768</span>)<span style="color:#f92672">.</span>images[<span style="color:#ae81ff">0</span>]
</span></span><span style="display:flex;"><span>image<span style="color:#f92672">.</span>save(<span style="color:#e6db74">&#34;test.png&#34;</span>)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>$ python safe.py
</span></span><span style="display:flex;"><span>$ ls test.png
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ python safe.py <span style="color:#e6db74">&#34;masterpiece, best quality, very_high_resolution, large_filesize, full color, beautiful kawaii, gold hair, little girl&#34;</span>
</span></span><span style="display:flex;"><span>$ ls test.png
</span></span></code></pre></div><h2 id="mcafee-remove">mcafee remove</h2>
<p><code>Win</code>+<code>R</code>を押して<code>msconfig</code>からboot(セーフモード)を起動しましょう。以下のようなフォルダを削除します。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>C:<span style="color:#ae81ff">\P</span>rogram Files<span style="color:#ae81ff">\C</span>ommon Files<span style="color:#ae81ff">\M</span>cAfee
</span></span><span style="display:flex;"><span>C:<span style="color:#ae81ff">\P</span>rogram Files<span style="color:#ae81ff">\C</span>ommon Files<span style="color:#ae81ff">\A</span>V
</span></span><span style="display:flex;"><span>C:<span style="color:#ae81ff">\P</span>rogram Files<span style="color:#f92672">(</span>x86_64<span style="color:#f92672">)</span><span style="color:#ae81ff">\C</span>ommon Files<span style="color:#ae81ff">\M</span>cAfee
</span></span><span style="display:flex;"><span>C:<span style="color:#ae81ff">\P</span>rogram Files<span style="color:#f92672">(</span>x86_64<span style="color:#f92672">)</span><span style="color:#ae81ff">\C</span>ommon Files<span style="color:#ae81ff">\A</span>V
</span></span><span style="display:flex;"><span>C:<span style="color:#ae81ff">\P</span>rogramData<span style="color:#ae81ff">\M</span>cAfee
</span></span></code></pre></div><p>なお、以下のコマンドは管理者実行でも効果なし。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>taskkill /im /f mfemms.exe
</span></span><span style="display:flex;"><span>wmic process where <span style="color:#e6db74">&#34;name=&#39;mfemms.exe&#39;&#34;</span> delete
</span></span><span style="display:flex;"><span>理由: アクセスが拒否されました。
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>sc stop <span style="color:#e6db74">&#34;mfemms&#34;</span>
</span></span><span style="display:flex;"><span>sc config <span style="color:#e6db74">&#34;mfemms&#34;</span> start<span style="color:#f92672">=</span> disabled
</span></span><span style="display:flex;"><span>sc delete <span style="color:#e6db74">&#34;mfemms&#34;</span>
</span></span></code></pre></div><p><a href="https://answers.microsoft.com/en-us/windows/forum/all/remove-all-mcafee-files/19ff126f-4378-4e43-ab7f-262a6f6e4853">https://answers.microsoft.com/en-us/windows/forum/all/remove-all-mcafee-files/19ff126f-4378-4e43-ab7f-262a6f6e4853</a></p>
<h2 id="desktop">desktop</h2>
<p>このアプリは現在非推奨です。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>https://github.com/rocksdanister/lively
</span></span><span style="display:flex;"><span>こういうのはあまり使わないんだけど、nasaのページが気に入っているので、それを設定したいということで。
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>https://eyes.nasa.gov/apps/solar-system/#/earth
</span></span></code></pre></div><h2 id="ultravnc">ultravnc</h2>
<p>このアプリは現在非推奨です。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>https://www.uvnc.com/downloads/ultravnc.html
</span></span><span style="display:flex;"><span>$ winget install uvncbvba.UltraVnc
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>管理者権限で実行しなければ、すべてのウィンドウに対して操作することができません。
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>したがって、exeやstartup<span style="color:#f92672">(</span>shell:startup<span style="color:#f92672">)</span>は、<span style="color:#e6db74">`</span>プロパティ &gt; 管理者としてこのプログラムを実行する<span style="color:#e6db74">`</span>にチェックを入れます。
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>その後、タスクスケジューラで設定しなければ自動起動しないようになりました。最上位の権限にチェックを入れます。
</span></span></code></pre></div><h2 id="virtualbox">virtualbox</h2>
<p>このアプリは現在非推奨です。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>https://www.virtualbox.org/
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;C:\Program Files\Oracle\VirtualBox\VBoxManage.exe&#34;</span> startvm arch --type headless
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>virtualboxのimgを起動時にbackgraundで実行するには、以下のようなscriptをstartupを置きます。
</span></span></code></pre></div>

		

	</div>

</article>




</div>
		<div class="footer-link">
	<span class="footer-link"><a href="https://syu.is/syui" target="_blank"><i class="fab fa-bluesky"></i></a></span>
		<span class="footer-link"><a href="https://card.syui.ai/syui" target="_blank"><span class="icon-ai"></span></a></span>
	<span class="footer-link"><a href="https://git.syui.ai/syui" target="_blank"><span class="icon-git"></span></a></span>
</div>

<script src="/js/svg.js"></script>
<script src="/js/highlight-filename.js"></script>
<footer id="footer">© syui</footer>

	</body>
</html>
