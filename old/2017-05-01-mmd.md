+++
date = "2017-05-01"
tags = ["mmd"]
title = "aviutl+mmd"
slug = "mmd"
+++

aviutlを使って動画編集してる。windowsなのでとてもつらい思いをしているが、ソフトウェア自体は便利。何が辛いのかというと、まあ色々辛い。単に触っている実感としてだけど。

さて、aviutlもかなり古めかしいソフトウェアみたいな感じで、しかし、代替がこれ以外はなかなか無いような状況なので、virtualbox上のwindowsで動かしている。mmdと同じような感じで、多分、virtualbox上なので動作がかなり重い感じになってるんだけど、それ以外の部分でもwindows関連のアプリというのは主に配布場所の観点から相当めんどくさいことになっている。

これは推測なんだけど、一部のすごいwindows開発者、というか時代に乗り遅れていないwindows開発者以外、完全に時代に遅れてしまっているのでは?という感じになっていて(あくまで個人的な感想です)、配布場所とか色々辛かった。bowlroll.netとかuploader.jpとかfc2とかでファイルを配布している人が多くて、その点で気を使うことが多かった(偽サイト経由でないか否かとか、このファイルは大丈夫なのだろうかとか)。

アプリ自体はきわめて優秀なんだけど、しかし、色々な確認にすごい時間がかかってしまった気がした。

とりあえず今回、aviutlでやってみた内容を紹介。

avitul : http://spring-fragrance.mints.ne.jp/aviutl/

まずは、mmdで作った`.avi`を読み込もうとするも読み込めず。プラグインが足りなかったらしかったのと、動画コーデックが足りなかったらしかった。後者は必要ないかもしれないけど、先にインストールしてしまった。インストールしたのは[CCCP](http://www.cccp-project.net/)というもので、正直、これ安全なのだろうかと思った。

L-SMASH Worksというプラグインを`/plugins`に入れればいいだけだった。 [L-SMASH Works](http://pop.4-bit.jp/?page_id=7929)

あと、拡張編集プラグインと言うものを導入しなければタイムライン、アニメーション、カスタムオブジェクトを付けられないので導入する。aviutlの公式プラグインにある。 `aviutl_plus_20120619.zip` http://spring-fragrance.mints.ne.jp/aviutl/

私は最新バージョンの`/plugins`フォルダに入れたけど、本体込みでついてくるみたいで、そのままでも使えるし、拡張バージョンは設定がちょっと変えられてたりするらしい。

.aviを読み込めたんだけど、今度は`/script`が動かなかったのがなぜだろうと思ったけど、単にディレクトリが間違ってたみたいで、`/plugins/script`に入れなければならなかったみたいだった、自分の場合は。これは、アプリのルートディレクトリ以下にあるファイルに起因するらしく、特定のファイルが置いてあるところに`script/`を置くらしい。多分。

次に、.aviを読み込んだのだけど、そもそもmmdで作った動画が透過されてないようで、編集の自由度が低かったので、`o_disAlphaBlend`というmmdプラグインみたいなものを使った。これはアクセサリに設定して、avi出力すればいい。これで出力される動画がaviutlで透過しやすくなった。 http://www.okoneya.ivory.ne.jp/mmd_files/

aviutlでの動画の透過は.aviを.mp4に変換して`設定 > 拡張編集の設定(プラグインを入れないと表示されない) > タイムライン > メディアオブジェクトの追加(ない場合はプロジェクトを作成した後に追加する) > 動画ファイル > 添付ファイル`みたいな項目から選択して入れる。

私の場合、モデルの背景にエフェクトを入れたかったのでそうしたけど、基本的にはmmdで作った.aviを基本にエフェクトを加えていく感じが一番良いのではないかとは思った。

次に、画像白一色を用意してタイムラインの一番上に設定。次にエフェクトを追加。次に動画(+クロマキー)で白を透過。これで上手く表示された。

使用したエフェクトは`カスタムオブジェクト`で`/plugins/script/foo.obj`に置いたものを使う。`/script/`に置くファイルの拡張子はアニメなら`.anm`、カスタムオブジェクトなら`.obj`などとする。 http://madeinpc.blog50.fc2.com/blog-entry-1188.html
