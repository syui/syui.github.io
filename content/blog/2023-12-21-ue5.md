+++
date = "2023-12-21"
tags = ["ue5","3d"]
title = "ue5を触ってみた9"
slug = "ue5"
+++

今回は、髪の毛が体を貫通する問題の修正と歩くモーションを変更する方法です。

### KawaiiPhysics

https://github.com/pafuhana1213/KawaiiPhysics

このpluginは素晴らしい働きをし、完璧に動作します。

ただし、このpluginはc++クラスを追加する必要があります。

c++クラスを追加するとwindows側でprojectを起動できなくなります。私はmacからwindowsに送ってbuildしています。

したがって、[こちら](https://forums.unrealengine.com/t/4-14-cannot-open-project-anymore/379795/6)にあるように.uprojectを修正して起動し、c++クラスを追加後に右クリック、`generate visual studio project files`から`.sln`を作成してrebuildします。rebuildする際もあらゆる依存関係でerrorが出るかもしれません。ue5は基本的に壊れているので、あらゆる問題が発生する可能性があります。

このpluginの使い方は、vroid studioで後ろ髪のboneを確認したあと、そのboneをrootに設定し、各種[limit](https://qiita.com/YuukiOgino/items/7f3198a90dab43019f26)を設定し、指定のboneを貫通しないようにします。`Sphere Limit`,`Capsule Limit`, `Plane Limit`があります。

![](https://raw.githubusercontent.com/syui/img/master/other/ue5_ai_20231224_0001.png)

ちなみに、今回は`UE_5.3/Engine/Build/BatchFiles/Build.bat`を動かすのに相当手間取りました。

1. pluginを使うにはc++クラスを追加する必要があるらしい

2. 追加するとwindowsでuprojectが開かなくなる

3. とりあえずc++なしでuprojectを開いてc++クラスを追加

4. slnでrebuildが通らない。visual studioが警告ありとか出てる

5. visual studioで.net framework sdk 4.8.0をインストールしろと言われる

6. .net framework 4.8のインストーラーがblockされる

7. .net framework 4.8.1とその他の.net関連をを手動でインストールする

8. 1回目のrebuildが何故か失敗する

9. 2回目でやっと`UE_5.3/Engine/Build/BatchFiles/Build.bat`が動作する

10. uprojectが正常に開くようになる

こんな感じでue5が動作する環境を構築してる時間のほうがゲーム開発してる時間より長い。ゲーム開発をしている場合ではない。

### walk/run, land state

`ABP_Player`でwalk/runのstateを編集したり、スタート時のダッシュをアニメモンタージュで調整したりしました。

[/ai/video/#ue5_ai_0006.mp4](/ai/video/#ue5_ai_0006.mp4)

